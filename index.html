<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Summary c5696dcc8f202f2b6509786c813157e1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div id="total-sales"></div>
    <select id="currency-picker"></select>
    <div id="total-currency"></div>

    <script>
        fetch('data.csv')
            .then(response => response.text())
            .then(data => {
                let total = 0;
                data.trim().split('\n').forEach(row => {
                    const columns = row.split(',');
                    if (columns.length > 1 && !isNaN(parseFloat(columns[1]))) {
                        total += parseFloat(columns[1]);
                    }
                });
                document.getElementById('total-sales').textContent = total.toFixed(2);

                fetch('rates.json')
                    .then(response => response.json())
                    .then(rates => {
                        const currencyPicker = document.getElementById('currency-picker');
                        const totalCurrency = document.getElementById('total-currency');
                        
                        Object.keys(rates).forEach(currency => {
                            const option = document.createElement('option');
                            option.value = currency;
                            option.textContent = currency;
                            currencyPicker.appendChild(option);
                        });

                        currencyPicker.addEventListener('change', function() {
                            const selectedCurrency = currencyPicker.value;
                            const convertedTotal = total * rates[selectedCurrency];
                            totalCurrency.textContent = `${selectedCurrency} `;
                            document.getElementById('total-sales').textContent = convertedTotal.toFixed(2);
                        });
                    });
            });
    </script>
</body>
</html>